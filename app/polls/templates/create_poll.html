{% extends "base.html" %}
{% load static %}
{% block title %}åˆ›å»ºæŠ•ç¥¨ - DjangoVote{% endblock %}

{% block content %}
<div class="create-poll-container">
    <h1 class="create-poll-title">åˆ›å»ºæ–°æŠ•ç¥¨</h1>
    <p class="create-poll-subtitle">åœ¨DjangoVoteä¸Šå‘è¡¨ä½ çš„æŠ•ç¥¨ï¼</p>

    <form id="poll-form" method="post" action="{% url 'polls:create_poll_API' %}" class="poll-form">
        {% csrf_token %}

        <!-- æŠ•ç¥¨æ ‡é¢˜ -->
        <div class="form-group">
            <label for="title" class="form-label">æŠ•ç¥¨æ ‡é¢˜</label>
            <input type="text" id="title" name="title" maxlength="20"
                   value="{% if title %}{{ title }}{% endif %}"
                   placeholder="è¯·è¾“å…¥æŠ•ç¥¨æ ‡é¢˜ï¼ˆ20å­—ä»¥å†…ï¼‰"
                   class="form-input" required>
            <div class="error-tip" id="titleErr">{{ titleErr }}</div>
        </div>

        <!-- æŠ•ç¥¨æè¿° -->
        <div class="form-group">
            <label for="text" class="form-label">æŠ•ç¥¨æè¿°ï¼ˆå¯é€‰ï¼‰</label>
            <input type="text" id="text" name="text" maxlength="200"
                   value="{% if text %}{{ text }}{% endif %}"
                   placeholder="è¯·è¾“å…¥æŠ•ç¥¨æè¿°ï¼ˆ200å­—ä»¥å†…ï¼‰"
                   class="form-input">
        </div>

        <!-- æŠ•ç¥¨é€‰é¡¹åŒºåŸŸ -->
        <div class="options-section">
            <h2 class="options-title">æ·»åŠ æŠ•ç¥¨é€‰é¡¹</h2>
            <div id="options-container" class="options-container">
                <!-- é€‰é¡¹ä¼šåŠ¨æ€æ·»åŠ åˆ°è¿™é‡Œ -->
            </div>

            <div class="button-group">
                <button type="button" id="add-option-btn" class="add-option-btn">
                    <span>â•</span> æ·»åŠ é€‰é¡¹
                </button>
                <button id = "create-poll-btn" type="submit" class="submit-btn">åˆ›å»ºæŠ•ç¥¨</button>
            </div>
        </div>
    </form>
</div>

<!-- é€‰é¡¹æ¨¡æ¿ -->
<template id="option-template">
    <div class="option-item">
        <input type="text" name="options[]" maxlength="50"
               placeholder="è¯·è¾“å…¥é€‰é¡¹å†…å®¹ï¼ˆ50å­—ä»¥å†…ï¼‰"
               class="option-input">
        <button type="button" class="delete-btn">ğŸ—‘ï¸ åˆ é™¤</button>
    </div>
</template>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/create_poll.js' %}"></script>
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/create_poll.css' %}">
{% endblock %}